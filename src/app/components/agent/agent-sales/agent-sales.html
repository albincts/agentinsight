<div class="sales-page">
  <app-sidebar></app-sidebar>

  <main class="sales-content">
    <div class="sales-header">
      <div class="sales-header-left">
        <h1>Sales</h1>
        <div class="sales-metrics">
          <div class="metric">
            <div class="metric-label">Total Sales</div>
            <div class="metric-value">{{ totalsales | currency:'USD' }}</div>
          </div>
          <div class="metric">
            <div class="metric-label">Conversion Rate</div>
            <div class="metric-value">{{ conversionRate }}%</div>
          </div>
        </div>
      </div>

      <div class="actions">
        <button class="btn-add">Add Sale</button>
      </div>
    </div>

    <div class="table-card">
      <table class="sales-table">
        <thead>
          <tr>
            <th>Policy</th>
            <th>Date</th>
            <th>Sale Amount</th>
            <th>Agent</th>
            <th>Status</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let s of pagedSales">
            <td>{{ getPolicyName(s.policyid) }}</td>
            <td>{{ s.saledate }}</td>
            <td>{{ s.saleamount | currency:'USD' }}</td>
            <td>{{ getAgentName(s.agentid) }}</td>
            <td><span class="status" [ngClass]="s.status?.toLowerCase()">{{ s.status }}</span></td>
          </tr>
        </tbody>
      </table>

      <div class="pagination">
        <button (click)="prevPage()" [disabled]="page === 1">&lt;</button>
        <span class="page-indicator">{{ page }}</span>
        <button (click)="nextPage()" [disabled]="page * pageSize >= sales.length">&gt;</button>
      </div>
    </div>
  </main>
</div>
